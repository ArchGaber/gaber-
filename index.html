<!doctype html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>QuranListen ‚Äî The World's Best Quran Listening Experience</title>

  <!-- Theme preconnect for faster CDN audio (if used) -->
  <link rel="preconnect" href="https://cdn.islamic.network" crossorigin>

  <!-- Styles -->
  <link rel="stylesheet" href="style.css">

  <!-- Small meta for progressive enhancement -->
  <meta name="description" content="Responsive, accessible Quran listening SPA with multiple reciters, murattal & mujawwad styles, advanced audio controls, search, dark mode, and keyboard navigation." />
</head>
<body class="app fade-in" data-theme="light">

  <header class="topbar" role="banner">
    <div class="brand" aria-hidden="false">
      <div class="logo" aria-hidden="true">Ô∑Ω</div>
      <div class="titles">
        <h1>QuranListen</h1>
        <p class="tagline">Beautiful, accessible Quran listening ‚Äî murattal & mujawwad</p>
      </div>
    </div>

    <div class="controls" role="navigation" aria-label="Main controls">
      <label class="sr-only" for="search">Search Surah or Reciter</label>
      <input id="search" class="search" type="search" placeholder="Search surah, reciter or recitation type..." aria-label="Search surah, reciter or recitation type" />

      <select id="reciterSelect" aria-label="Choose reciter" class="select">
        <!-- Populated by JS -->
      </select>

      <select id="typeSelect" aria-label="Recitation type" class="select">
        <option value="murattal">Murattal (Clear, measured)</option>
        <option value="mujawwad">Mujawwad (Melodic)</option>
      </select>

      <button id="themeToggle" class="btn icon-btn" aria-pressed="false" aria-label="Toggle dark mode" title="Toggle dark / light mode">üåô</button>
    </div>
  </header>

  <main class="main" role="main">
    <aside class="sidebar" role="complementary" aria-label="Surah list">
      <div class="panel">
        <h2>Surahs</h2>
        <div class="surah-list" id="surahList" tabindex="0" aria-label="List of surahs">
          <!-- Surah items injected by JS -->
        </div>
      </div>

      <div class="panel reciter-panel">
        <h3>Reciter Info</h3>
        <div id="reciterInfo" class="reciter-info" aria-live="polite">
          <!-- Selected reciter description filled by JS -->
        </div>

        <div class="reciter-grid" id="reciterGrid" aria-label="Reciters">
          <!-- Reciter cards populated by JS -->
        </div>

        <details>
          <summary>Audio Source Templates</summary>
          <p class="small">
            Use provided templates to fetch high-quality MP3 per-surah from trusted CDNs (example: Islamic.Network CDN).
            You can also paste a custom audio template URL in the settings panel (use {reciterId} and {surah} placeholders).
          </p>
          <ul class="small">
            <li><code>https://cdn.islamic.network/quran/audio/128/{reciterId}/{surah}.mp3</code> (recommended)</li>
            <li><code>https://download.quranicaudio.com/{reciterFolder}/{recitationType}/{surah}.mp3</code> (another option)</li>
          </ul>
        </details>
      </div>
    </aside>

    <section class="player-area" aria-label="Player section">
      <div class="card" id="nowPlaying" aria-live="polite">
        <div class="now-top">
          <div class="now-meta">
            <div class="surah-meta">
              <div id="surahNumber" class="surah-number">‚Äî</div>
              <div>
                <div id="surahName" class="surah-name">Select a surah</div>
                <div id="surahNameArabic" class="surah-arabic" aria-hidden="true"></div>
              </div>
            </div>

            <div class="recitation-meta">
              <div id="selectedReciter">‚Äî</div>
              <div id="selectedType" class="muted">‚Äî</div>
            </div>
          </div>

          <div class="art">
            <!-- Decorative Islamic-inspired pattern -->
            <svg width="86" height="86" viewBox="0 0 100 100" aria-hidden="true">
              <defs><linearGradient id="g" x1="0" x2="1"><stop offset="0" stop-color="#8fbf8f"/><stop offset="1" stop-color="#d4b255"/></linearGradient></defs>
              <circle cx="50" cy="50" r="46" fill="url(#g)"></circle>
            </svg>
          </div>
        </div>

        <!-- Player controls -->
        <div class="player-controls" role="region" aria-label="Audio player controls">
          <div class="big-controls">
            <button id="prevBtn" class="btn icon-btn" aria-label="Previous surah">‚ü∏</button>
            <button id="playPauseBtn" class="btn play-btn" aria-label="Play" title="Play (Space)">‚ñ∫</button>
            <button id="stopBtn" class="btn icon-btn" aria-label="Stop">‚ñ†</button>
            <button id="nextBtn" class="btn icon-btn" aria-label="Next surah">‚üπ</button>
          </div>

          <div class="progress-row">
            <div class="time left" id="currentTime">0:00</div>
            <div class="progress" role="slider" aria-label="Seek" tabindex="0">
              <input id="progress" type="range" min="0" max="100" value="0" step="0.1" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" />
            </div>
            <div class="time right" id="duration">0:00</div>
          </div>

          <div class="secondary-controls">
            <label class="small" for="volume">Vol</label>
            <input id="volume" type="range" min="0" max="1" step="0.01" value="0.95" aria-label="Volume" />

            <label class="small" for="speed">Speed</label>
            <select id="speed" aria-label="Playback speed">
              <option value="0.5">0.5x</option>
              <option value="0.75">0.75x</option>
              <option value="1" selected>1x</option>
              <option value="1.25">1.25x</option>
              <option value="1.5">1.5x</option>
              <option value="2">2x</option>
            </select>

            <div class="repeat-group" role="group" aria-label="Repeat">
              <button id="repeatBtn" class="btn icon-btn" aria-pressed="false" title="Repeat mode">üîÅ Off</button>
            </div>

            <button id="openSettings" class="btn" aria-haspopup="dialog" aria-controls="settingsDialog">Settings</button>
          </div>
        </div>

        <!-- Visually hidden audio element for screen readers (but controls are custom) -->
        <audio id="audio" preload="auto" crossorigin="anonymous">
          <!-- Source elements will be populated by JavaScript -->
          your browser does not support the audio element.
        </audio>
      </div>

      <!-- Settings dialog (basic, accessible) -->
      <dialog id="settingsDialog" aria-labelledby="settingsTitle">
        <h3 id="settingsTitle">Player settings</h3>
        <form method="dialog" id="settingsForm">
          <label for="customTemplate">Custom audio template (use {reciterId} and {surah})</label>
          <input id="customTemplate" type="text" placeholder="https://cdn.example.com/audio/128/{reciterId}/{surah}.mp3" />

          <label for="autoAdvance">Auto-advance to next surah</label>
          <input id="autoAdvance" type="checkbox" />

          <label for="useLocalAudio">Use local audio files (folder: <code>sound/</code>)</label>
          <input id="useLocalAudio" type="checkbox" />

          <p id="localFilesStatus" class="small" aria-live="polite" style="margin-top:6px;">Checking local files...</p>

          <div class="dialog-actions">
            <button id="saveSettings" class="btn primary" type="submit">Save</button>
            <button id="cancelSettings" class="btn" type="button">Cancel</button>
          </div>
        </form>
      </dialog>

      <!-- Accessibility helper -->
      <div id="ariaStatus" class="sr-only" aria-live="polite"></div>
    </section>
  </main>

  <footer class="footer" role="contentinfo">
    <div>
      <small>Islamic-inspired design ‚Ä¢ No ads ‚Ä¢ Focused listening</small>
    </div>
    <div>
      <small>Keyboard: Space Play/Pause ‚Ä¢ ‚Üê/‚Üí Seek ‚Ä¢ ‚Üë/‚Üì Volume ‚Ä¢ S Settings</small>
    </div>
  </footer>

  <!-- App script -->
  <script src="app.js" defer></script>
</body>
</html>